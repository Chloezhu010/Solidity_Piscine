# Project P05 – Staking Pool

**Level:** Intermediate  
**Estimated Time:** 4–5 days  

---

## Objective
Build a staking pool that lets users deposit tokens to earn reward tokens over time.

---

## Learning Goals
- Understand staking and reward accrual.
- Work with proportional reward distribution.
- Implement claiming and withdrawal safely.

---

## Requirements
1. **Staking**
   - `stake(uint256 amount)` deposits ERC20 tokens.
   - Track user balances and total staked.

2. **Rewards**
   - Linear reward accrual per block or timestamp.
   - `claimRewards()` transfers accumulated rewards.

3. **Withdraw**
   - `withdraw(uint256 amount)` to unstake.
   - Update rewards before withdrawal.

4. **Events**
   - `Staked(address indexed user, uint256 amount)`
   - `RewardClaimed(address indexed user, uint256 amount)`

---

## Deliverables
- `StakingPool.sol`
- Tests for staking, claiming, and withdrawing.
- `README.md` explaining reward calculation logic.

---

## Bonus Challenges
### Gas Optimization
- Replace iterative reward updates with **checkpointing**.
- Store reward per token to minimize loop operations.

### Security
- Protect against DoS from large numbers of stakers.
- Prevent reentrancy on claim/withdraw.

### Research
- Read Synthetix staking contracts and explain how they scale reward distribution.

---

## Peer Review Defense
Be ready to explain:
- How rewards are calculated.
- Your checkpointing or distribution model.
- Gas vs complexity tradeoffs.

---

## Resources
- [Synthetix Staking](https://docs.synthetix.io/)
- [Checkpointing Patterns](https://blog.openzeppelin.com/optimizing-gas-costs-in-erc20-transfers)
